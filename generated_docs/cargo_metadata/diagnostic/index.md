*[cargo_metadata](../index.md) / [diagnostic](index.md)*

---

# Module `diagnostic`

This module contains `Diagnostic` and the types/functions it uses for deserialization.

## Quick Reference

| Item | Kind | Description |
|------|------|-------------|
| [`DiagnosticCode`](#diagnosticcode) | struct | The error code associated to this diagnostic. |
| [`DiagnosticSpanLine`](#diagnosticspanline) | struct | A line of code associated with the Diagnostic |
| [`DiagnosticSpanMacroExpansion`](#diagnosticspanmacroexpansion) | struct | Macro expansion information associated with a diagnostic. |
| [`DiagnosticSpan`](#diagnosticspan) | struct | A section of the source code associated with a Diagnostic |
| [`Diagnostic`](#diagnostic) | struct | A diagnostic message generated by rustc |
| [`Applicability`](#applicability) | enum | Whether a suggestion can be safely applied. |
| [`DiagnosticLevel`](#diagnosticlevel) | enum | The diagnostic level |

## Structs

### `DiagnosticCode`

```rust
struct DiagnosticCode {
    pub code: String,
    pub explanation: Option<String>,
}
```

*Defined in [`cargo_metadata-0.23.1/src/diagnostic.rs:13-18`](../../../.source_1765521767/cargo_metadata-0.23.1/src/diagnostic.rs#L13-L18)*

The error code associated to this diagnostic.

#### Fields

- **`code`**: `String`

  The code itself.

- **`explanation`**: `Option<String>`

  An explanation for the code

#### Trait Implementations

##### `impl Clone for DiagnosticCode`

- <span id="diagnosticcode-clone"></span>`fn clone(&self) -> DiagnosticCode` — [`DiagnosticCode`](#diagnosticcode)

##### `impl Debug for DiagnosticCode`

- <span id="diagnosticcode-fmt"></span>`fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result`

##### `impl Deserialize for DiagnosticCode`

- <span id="diagnosticcode-deserialize"></span>`fn deserialize<__D>(__deserializer: __D) -> _serde::__private228::Result<Self, <__D as >::Error>`

##### `impl DeserializeOwned for DiagnosticCode`

##### `impl Eq for DiagnosticCode`

##### `impl Hash for DiagnosticCode`

- <span id="diagnosticcode-hash"></span>`fn hash<__H: hash::Hasher>(&self, state: &mut __H)`

##### `impl PartialEq for DiagnosticCode`

- <span id="diagnosticcode-eq"></span>`fn eq(&self, other: &DiagnosticCode) -> bool` — [`DiagnosticCode`](#diagnosticcode)

##### `impl Serialize for DiagnosticCode`

- <span id="diagnosticcode-serialize"></span>`fn serialize<__S>(&self, __serializer: __S) -> _serde::__private228::Result<<__S as >::Ok, <__S as >::Error>`

##### `impl StructuralPartialEq for DiagnosticCode`

### `DiagnosticSpanLine`

```rust
struct DiagnosticSpanLine {
    pub text: String,
    pub highlight_start: usize,
    pub highlight_end: usize,
}
```

*Defined in [`cargo_metadata-0.23.1/src/diagnostic.rs:25-32`](../../../.source_1765521767/cargo_metadata-0.23.1/src/diagnostic.rs#L25-L32)*

A line of code associated with the Diagnostic

#### Fields

- **`text`**: `String`

  The line of code associated with the error

- **`highlight_start`**: `usize`

  Start of the section of the line to highlight. 1-based, character offset in self.text

- **`highlight_end`**: `usize`

  End of the section of the line to highlight. 1-based, character offset in self.text

#### Trait Implementations

##### `impl Clone for DiagnosticSpanLine`

- <span id="diagnosticspanline-clone"></span>`fn clone(&self) -> DiagnosticSpanLine` — [`DiagnosticSpanLine`](#diagnosticspanline)

##### `impl Debug for DiagnosticSpanLine`

- <span id="diagnosticspanline-fmt"></span>`fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result`

##### `impl Deserialize for DiagnosticSpanLine`

- <span id="diagnosticspanline-deserialize"></span>`fn deserialize<__D>(__deserializer: __D) -> _serde::__private228::Result<Self, <__D as >::Error>`

##### `impl DeserializeOwned for DiagnosticSpanLine`

##### `impl Eq for DiagnosticSpanLine`

##### `impl Hash for DiagnosticSpanLine`

- <span id="diagnosticspanline-hash"></span>`fn hash<__H: hash::Hasher>(&self, state: &mut __H)`

##### `impl PartialEq for DiagnosticSpanLine`

- <span id="diagnosticspanline-eq"></span>`fn eq(&self, other: &DiagnosticSpanLine) -> bool` — [`DiagnosticSpanLine`](#diagnosticspanline)

##### `impl Serialize for DiagnosticSpanLine`

- <span id="diagnosticspanline-serialize"></span>`fn serialize<__S>(&self, __serializer: __S) -> _serde::__private228::Result<<__S as >::Ok, <__S as >::Error>`

##### `impl StructuralPartialEq for DiagnosticSpanLine`

### `DiagnosticSpanMacroExpansion`

```rust
struct DiagnosticSpanMacroExpansion {
    pub span: DiagnosticSpan,
    pub macro_decl_name: String,
    pub def_site_span: Option<DiagnosticSpan>,
}
```

*Defined in [`cargo_metadata-0.23.1/src/diagnostic.rs:39-50`](../../../.source_1765521767/cargo_metadata-0.23.1/src/diagnostic.rs#L39-L50)*

Macro expansion information associated with a diagnostic.

#### Fields

- **`span`**: `DiagnosticSpan`

  span where macro was applied to generate this code; note that
  this may itself derive from a macro (if
  `span.expansion.is_some()`)

- **`macro_decl_name`**: `String`

  name of macro that was applied (e.g., "foo!" or "#[derive(Eq)]")

- **`def_site_span`**: `Option<DiagnosticSpan>`

  span where macro was defined (if known)

#### Trait Implementations

##### `impl Clone for DiagnosticSpanMacroExpansion`

- <span id="diagnosticspanmacroexpansion-clone"></span>`fn clone(&self) -> DiagnosticSpanMacroExpansion` — [`DiagnosticSpanMacroExpansion`](#diagnosticspanmacroexpansion)

##### `impl Debug for DiagnosticSpanMacroExpansion`

- <span id="diagnosticspanmacroexpansion-fmt"></span>`fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result`

##### `impl Deserialize for DiagnosticSpanMacroExpansion`

- <span id="diagnosticspanmacroexpansion-deserialize"></span>`fn deserialize<__D>(__deserializer: __D) -> _serde::__private228::Result<Self, <__D as >::Error>`

##### `impl DeserializeOwned for DiagnosticSpanMacroExpansion`

##### `impl Eq for DiagnosticSpanMacroExpansion`

##### `impl Hash for DiagnosticSpanMacroExpansion`

- <span id="diagnosticspanmacroexpansion-hash"></span>`fn hash<__H: hash::Hasher>(&self, state: &mut __H)`

##### `impl PartialEq for DiagnosticSpanMacroExpansion`

- <span id="diagnosticspanmacroexpansion-eq"></span>`fn eq(&self, other: &DiagnosticSpanMacroExpansion) -> bool` — [`DiagnosticSpanMacroExpansion`](#diagnosticspanmacroexpansion)

##### `impl Serialize for DiagnosticSpanMacroExpansion`

- <span id="diagnosticspanmacroexpansion-serialize"></span>`fn serialize<__S>(&self, __serializer: __S) -> _serde::__private228::Result<<__S as >::Ok, <__S as >::Error>`

##### `impl StructuralPartialEq for DiagnosticSpanMacroExpansion`

### `DiagnosticSpan`

```rust
struct DiagnosticSpan {
    pub file_name: String,
    pub byte_start: u32,
    pub byte_end: u32,
    pub line_start: usize,
    pub line_end: usize,
    pub column_start: usize,
    pub column_end: usize,
    pub is_primary: bool,
    pub text: Vec<DiagnosticSpanLine>,
    pub label: Option<String>,
    pub suggested_replacement: Option<String>,
    pub suggestion_applicability: Option<Applicability>,
    pub expansion: Option<Box<DiagnosticSpanMacroExpansion>>,
}
```

*Defined in [`cargo_metadata-0.23.1/src/diagnostic.rs:57-92`](../../../.source_1765521767/cargo_metadata-0.23.1/src/diagnostic.rs#L57-L92)*

A section of the source code associated with a Diagnostic

#### Fields

- **`file_name`**: `String`

  The file name or the macro name this diagnostic comes from.

- **`byte_start`**: `u32`

  The byte offset in the file where this diagnostic starts from.

- **`byte_end`**: `u32`

  The byte offset in the file where this diagnostic ends.

- **`line_start`**: `usize`

  1-based. The line in the file.

- **`line_end`**: `usize`

  1-based. The line in the file.

- **`column_start`**: `usize`

  1-based, character offset.

- **`column_end`**: `usize`

  1-based, character offset.

- **`is_primary`**: `bool`

  Is this a "primary" span -- meaning the point, or one of the points,
  where the error occurred?
  
  There are rare cases where multiple spans are marked as primary,
  e.g. "immutable borrow occurs here" and "mutable borrow ends here" can
  be two separate spans both "primary". Top (parent) messages should
  always have at least one primary span, unless it has 0 spans. Child
  messages may have 0 or more primary spans.

- **`text`**: `Vec<DiagnosticSpanLine>`

  Source text from the start of line_start to the end of line_end.

- **`label`**: `Option<String>`

  Label that should be placed at this location (if any)

- **`suggested_replacement`**: `Option<String>`

  If we are suggesting a replacement, this will contain text
  that should be sliced in atop this span.

- **`suggestion_applicability`**: `Option<Applicability>`

  If the suggestion is approximate

- **`expansion`**: `Option<Box<DiagnosticSpanMacroExpansion>>`

  Macro invocations that created the code at this span, if any.

#### Trait Implementations

##### `impl Clone for DiagnosticSpan`

- <span id="diagnosticspan-clone"></span>`fn clone(&self) -> DiagnosticSpan` — [`DiagnosticSpan`](#diagnosticspan)

##### `impl Debug for DiagnosticSpan`

- <span id="diagnosticspan-fmt"></span>`fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result`

##### `impl Deserialize for DiagnosticSpan`

- <span id="diagnosticspan-deserialize"></span>`fn deserialize<__D>(__deserializer: __D) -> _serde::__private228::Result<Self, <__D as >::Error>`

##### `impl DeserializeOwned for DiagnosticSpan`

##### `impl Eq for DiagnosticSpan`

##### `impl Hash for DiagnosticSpan`

- <span id="diagnosticspan-hash"></span>`fn hash<__H: hash::Hasher>(&self, state: &mut __H)`

##### `impl PartialEq for DiagnosticSpan`

- <span id="diagnosticspan-eq"></span>`fn eq(&self, other: &DiagnosticSpan) -> bool` — [`DiagnosticSpan`](#diagnosticspan)

##### `impl Serialize for DiagnosticSpan`

- <span id="diagnosticspan-serialize"></span>`fn serialize<__S>(&self, __serializer: __S) -> _serde::__private228::Result<<__S as >::Ok, <__S as >::Error>`

##### `impl StructuralPartialEq for DiagnosticSpan`

### `Diagnostic`

```rust
struct Diagnostic {
    pub message: String,
    pub code: Option<DiagnosticCode>,
    pub level: DiagnosticLevel,
    pub spans: Vec<DiagnosticSpan>,
    pub children: Vec<Diagnostic>,
    pub rendered: Option<String>,
}
```

*Defined in [`cargo_metadata-0.23.1/src/diagnostic.rs:136-149`](../../../.source_1765521767/cargo_metadata-0.23.1/src/diagnostic.rs#L136-L149)*

A diagnostic message generated by rustc

#### Fields

- **`message`**: `String`

  The error message of this diagnostic.

- **`code`**: `Option<DiagnosticCode>`

  The associated error code for this diagnostic

- **`level`**: `DiagnosticLevel`

  "error: internal compiler error", "error", "warning", "note", "help"

- **`spans`**: `Vec<DiagnosticSpan>`

  A list of source code spans this diagnostic is associated with.

- **`children`**: `Vec<Diagnostic>`

  Associated diagnostic messages.

- **`rendered`**: `Option<String>`

  The message as rustc would render it

#### Trait Implementations

##### `impl Clone for Diagnostic`

- <span id="diagnostic-clone"></span>`fn clone(&self) -> Diagnostic` — [`Diagnostic`](#diagnostic)

##### `impl Debug for Diagnostic`

- <span id="diagnostic-fmt"></span>`fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result`

##### `impl Deserialize for Diagnostic`

- <span id="diagnostic-deserialize"></span>`fn deserialize<__D>(__deserializer: __D) -> _serde::__private228::Result<Self, <__D as >::Error>`

##### `impl DeserializeOwned for Diagnostic`

##### `impl Display for Diagnostic`

- <span id="diagnostic-fmt"></span>`fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result`

##### `impl Eq for Diagnostic`

##### `impl Hash for Diagnostic`

- <span id="diagnostic-hash"></span>`fn hash<__H: hash::Hasher>(&self, state: &mut __H)`

##### `impl PartialEq for Diagnostic`

- <span id="diagnostic-eq"></span>`fn eq(&self, other: &Diagnostic) -> bool` — [`Diagnostic`](#diagnostic)

##### `impl Serialize for Diagnostic`

- <span id="diagnostic-serialize"></span>`fn serialize<__S>(&self, __serializer: __S) -> _serde::__private228::Result<<__S as >::Ok, <__S as >::Error>`

##### `impl StructuralPartialEq for Diagnostic`

##### `impl ToString for Diagnostic`

- <span id="diagnostic-to-string"></span>`fn to_string(&self) -> String`

## Enums

### `Applicability`

```rust
enum Applicability {
    MachineApplicable,
    HasPlaceholders,
    MaybeIncorrect,
    Unspecified,
}
```

*Defined in [`cargo_metadata-0.23.1/src/diagnostic.rs:97-108`](../../../.source_1765521767/cargo_metadata-0.23.1/src/diagnostic.rs#L97-L108)*

Whether a suggestion can be safely applied.

#### Variants

- **`MachineApplicable`**

  The suggested replacement can be applied automatically safely

- **`HasPlaceholders`**

  The suggested replacement has placeholders that will need to be manually
  replaced.

- **`MaybeIncorrect`**

  The suggested replacement may be incorrect in some circumstances. Needs
  human review.

- **`Unspecified`**

  The suggested replacement will probably not work.

#### Trait Implementations

##### `impl Clone for Applicability`

- <span id="applicability-clone"></span>`fn clone(&self) -> Applicability` — [`Applicability`](#applicability)

##### `impl Debug for Applicability`

- <span id="applicability-fmt"></span>`fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result`

##### `impl Deserialize for Applicability`

- <span id="applicability-deserialize"></span>`fn deserialize<__D>(__deserializer: __D) -> _serde::__private228::Result<Self, <__D as >::Error>`

##### `impl DeserializeOwned for Applicability`

##### `impl Eq for Applicability`

##### `impl Hash for Applicability`

- <span id="applicability-hash"></span>`fn hash<__H: hash::Hasher>(&self, state: &mut __H)`

##### `impl PartialEq for Applicability`

- <span id="applicability-eq"></span>`fn eq(&self, other: &Applicability) -> bool` — [`Applicability`](#applicability)

##### `impl Serialize for Applicability`

- <span id="applicability-serialize"></span>`fn serialize<__S>(&self, __serializer: __S) -> _serde::__private228::Result<<__S as >::Ok, <__S as >::Error>`

##### `impl StructuralPartialEq for Applicability`

### `DiagnosticLevel`

```rust
enum DiagnosticLevel {
    Ice,
    Error,
    Warning,
    FailureNote,
    Note,
    Help,
}
```

*Defined in [`cargo_metadata-0.23.1/src/diagnostic.rs:114-129`](../../../.source_1765521767/cargo_metadata-0.23.1/src/diagnostic.rs#L114-L129)*

The diagnostic level

#### Variants

- **`Ice`**

  Internal compiler error

- **`Error`**

  Error

- **`Warning`**

  Warning

- **`FailureNote`**

  Failure note

- **`Note`**

  Note

- **`Help`**

  Help

#### Trait Implementations

##### `impl Clone for DiagnosticLevel`

- <span id="diagnosticlevel-clone"></span>`fn clone(&self) -> DiagnosticLevel` — [`DiagnosticLevel`](#diagnosticlevel)

##### `impl Copy for DiagnosticLevel`

##### `impl Debug for DiagnosticLevel`

- <span id="diagnosticlevel-fmt"></span>`fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result`

##### `impl Deserialize for DiagnosticLevel`

- <span id="diagnosticlevel-deserialize"></span>`fn deserialize<__D>(__deserializer: __D) -> _serde::__private228::Result<Self, <__D as >::Error>`

##### `impl DeserializeOwned for DiagnosticLevel`

##### `impl Eq for DiagnosticLevel`

##### `impl Hash for DiagnosticLevel`

- <span id="diagnosticlevel-hash"></span>`fn hash<__H: hash::Hasher>(&self, state: &mut __H)`

##### `impl PartialEq for DiagnosticLevel`

- <span id="diagnosticlevel-eq"></span>`fn eq(&self, other: &DiagnosticLevel) -> bool` — [`DiagnosticLevel`](#diagnosticlevel)

##### `impl Serialize for DiagnosticLevel`

- <span id="diagnosticlevel-serialize"></span>`fn serialize<__S>(&self, __serializer: __S) -> _serde::__private228::Result<<__S as >::Ok, <__S as >::Error>`

##### `impl StructuralPartialEq for DiagnosticLevel`

